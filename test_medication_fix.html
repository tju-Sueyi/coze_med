<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ç”¨è¯ç®¡ç†ä¿®å¤éªŒè¯</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #f5f5f5;
        }
        .card {
            background: white;
            padding: 20px;
            margin-bottom: 20px;
            border-radius: 8px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.1);
        }
        h1 {
            color: #333;
        }
        .check-item {
            padding: 10px;
            margin: 10px 0;
            background: #f9f9f9;
            border-left: 4px solid #4CAF50;
        }
        .status {
            display: inline-block;
            padding: 4px 12px;
            border-radius: 12px;
            font-size: 12px;
            margin-left: 10px;
        }
        .status-ok {
            background: #d4edda;
            color: #155724;
        }
        .status-error {
            background: #f8d7da;
            color: #721c24;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            background: #007bff;
            color: white;
        }
        button:hover {
            background: #0056b3;
        }
        .info {
            background: #d1ecf1;
            border-left: 4px solid #0c5460;
            padding: 15px;
            margin: 20px 0;
        }
        code {
            background: #f4f4f4;
            padding: 2px 6px;
            border-radius: 3px;
            font-family: monospace;
        }
    </style>
</head>
<body>
    <h1>ğŸ”§ ç”¨è¯ç®¡ç†åŠŸèƒ½ä¿®å¤éªŒè¯</h1>
    
    <div class="card">
        <h2>ä¿®å¤å†…å®¹</h2>
        <div class="check-item">
            âœ… <strong>é—®é¢˜1ï¼šç™»å½•çŠ¶æ€æ£€æŸ¥</strong>
            <div style="margin-top: 8px; color: #666;">
                ä¿®æ”¹äº†ç™»å½•éªŒè¯æ–¹å¼ï¼Œç°åœ¨ä½¿ç”¨ <code>session_id</code> è€Œä¸æ˜¯ <code>currentUser</code>
            </div>
        </div>
        <div class="check-item">
            âœ… <strong>é—®é¢˜2ï¼šé¡µé¢åˆ·æ–°é—®é¢˜</strong>
            <div style="margin-top: 8px; color: #666;">
                æ‰€æœ‰æŒ‰é’®éƒ½æ·»åŠ äº† <code>type="button"</code> å±æ€§ï¼Œé˜²æ­¢è¡¨å•æäº¤å¯¼è‡´é¡µé¢åˆ·æ–°
            </div>
        </div>
    </div>

    <div class="card">
        <h2>éªŒè¯æ­¥éª¤</h2>
        <ol>
            <li>
                <strong>æ£€æŸ¥ç™»å½•çŠ¶æ€</strong>
                <div id="session-status" style="margin: 10px 0;">
                    æ­£åœ¨æ£€æŸ¥... <span class="status" id="session-indicator">æ£€æµ‹ä¸­</span>
                </div>
            </li>
            <li style="margin-top: 15px;">
                <strong>æµ‹è¯•é¡µé¢è·³è½¬</strong>
                <div style="margin: 10px 0;">
                    <button onclick="testNavigation()">æµ‹è¯•ç”¨è¯ç®¡ç†é¡µé¢è·³è½¬</button>
                </div>
            </li>
        </ol>
    </div>

    <div class="info">
        <strong>ğŸ“ æ³¨æ„äº‹é¡¹ï¼š</strong>
        <ul>
            <li>è¯·ç¡®ä¿ä½ å·²ç»ç™»å½•ç³»ç»Ÿ</li>
            <li>å¦‚æœçœ‹åˆ°"æœªç™»å½•"çŠ¶æ€ï¼Œè¯·å…ˆè®¿é—® <a href="index.html">é¦–é¡µ</a> ç™»å½•</li>
            <li>ç™»å½•ååˆ·æ–°æ­¤é¡µé¢é‡æ–°æ£€æµ‹</li>
        </ul>
    </div>

    <div class="card">
        <h2>ä¿®æ”¹çš„æ–‡ä»¶</h2>
        <ul>
            <li><code>medication.js</code> - ä¿®å¤ç™»å½•æ£€æŸ¥é€»è¾‘å’Œæ ‡ç­¾åˆ‡æ¢</li>
            <li><code>medication.html</code> - æ‰€æœ‰æŒ‰é’®æ·»åŠ  type="button" å±æ€§</li>
        </ul>
    </div>

    <div class="card">
        <h2>ä¸‹ä¸€æ­¥</h2>
        <div style="text-align: center; margin: 20px 0;">
            <button onclick="window.location.href='index.html'" style="background: #28a745;">
                ğŸ  è¿”å›é¦–é¡µç™»å½•
            </button>
            <button onclick="window.location.href='medication.html'" style="background: #17a2b8;">
                ğŸ’Š è¿›å…¥ç”¨è¯ç®¡ç†
            </button>
        </div>
    </div>

    <script>
        // æ£€æŸ¥ç™»å½•çŠ¶æ€
        function checkLoginStatus() {
            const sessionId = localStorage.getItem('session_id');
            const statusEl = document.getElementById('session-status');
            const indicatorEl = document.getElementById('session-indicator');
            
            if (sessionId) {
                statusEl.innerHTML = 'âœ… å·²æ£€æµ‹åˆ°ç™»å½•ä¼šè¯ ';
                indicatorEl.className = 'status status-ok';
                indicatorEl.textContent = 'å·²ç™»å½•';
            } else {
                statusEl.innerHTML = 'âŒ æœªæ£€æµ‹åˆ°ç™»å½•ä¼šè¯ ';
                indicatorEl.className = 'status status-error';
                indicatorEl.textContent = 'æœªç™»å½•';
            }
        }

        function testNavigation() {
            const sessionId = localStorage.getItem('session_id');
            if (!sessionId) {
                alert('è¯·å…ˆç™»å½•ï¼\n\nç‚¹å‡»ç¡®å®šåå°†è·³è½¬åˆ°é¦–é¡µç™»å½•ã€‚');
                window.location.href = 'index.html';
            } else {
                window.location.href = 'medication.html';
            }
        }

        // é¡µé¢åŠ è½½æ—¶æ£€æŸ¥
        window.addEventListener('DOMContentLoaded', checkLoginStatus);
    </script>
</body>
</html>

